[pytest]
# Pytest Configuration File
# 테스트 실행 설정 및 timeout 관리

# 테스트 파일 검색 패턴
python_files = test_*.py *_test.py
python_classes = Test*
python_functions = test_*

# 테스트 폴더
testpaths = tests

# 기본 타임아웃 설정 (초)
# - 전체 테스트 세션: 300초 (5분)
# - 개별 테스트: 30초
# 너무 길어지는 테스트를 방지하기 위한 기본값
timeout = 30

# 타임아웃 메서드: 'thread' (기본) 또는 'signal'
# - thread: Windows 호환, 모든 플랫폼 동작
# - signal: Unix/Linux에서 더 정확하지만 Windows 미지원
timeout_method = thread

# asyncio 모드 설정 (pytest-asyncio)
asyncio_mode = auto

# 마커 등록
markers =
    slow: 느린 테스트 (통합 테스트, DB 연동 등)
    integration: 통합 테스트 (외부 서비스/DB 필요)
    unit: 단위 테스트 (mock만 사용, 외부 의존성 없음)
    timeout(n): 개별 테스트 타임아웃 설정 (초 단위)

#覆盖率 설정 (선택)
addopts =
    # 마커 미사용 경고 무석
    -W ignore::pytest.PytestUnraisableExceptionWarning
    # 타임아웃 활성화
    --timeout=30

# 로그 설정
log_cli = false
log_cli_level = INFO
log_cli_format = %(asctime)s [%(levelname)8s] %(message)s
log_cli_date_format = %Y-%m-%d %H:%M:%S

# 커버리지 설정 (pytest-cov)
# addopts = --cov=src --cov-report=html --cov-report=term

# 최소 커버리지 요구사항 (선택)
# cov-fail-under = 80
